(()=>{var e={544:(e,t,a)=>{let i=a(397),d=process.argv.slice(2),n=[];n=i.strToDecimalArray(d[1]),d[2];let r={bytes:n,fPort:Number(d[0]),recvTime:new Date};console.log(r);let s=[3,[{taglbl:0,resol:.004,sampletype:12,lblname:"4_20mA",divide:1},{taglbl:1,resol:1,sampletype:12,lblname:"0_10V",divide:1},{taglbl:2,resol:100,sampletype:6,lblname:"BatteryVoltage",divide:1e3},{taglbl:3,resol:100,sampletype:6,lblname:"ExternalPowerVoltage",divide:1e3},{taglbl:4,resol:1,sampletype:10,lblname:"Index",divide:1}]],l={analog:["4_20mA","0_10V"]},o=function(e){return result=i.watteco_decodeUplink(e,s,l)}(r);console.log(o)},41:(e,t)=>{var a=6,i=10,d=12,n={0:0,1:1,2:4,3:4,4:8,5:8};n[a]=16,n[7]=16,n[8]=24,n[9]=24,n[i]=32,n[11]=32,n[d]=32;var r=14,s=[[{sz:2,lbl:0},{sz:2,lbl:1},{sz:2,lbl:3},{sz:3,lbl:5},{sz:4,lbl:9},{sz:5,lbl:17},{sz:6,lbl:33},{sz:7,lbl:65},{sz:8,lbl:129},{sz:10,lbl:512},{sz:11,lbl:1026},{sz:11,lbl:1027},{sz:11,lbl:1028},{sz:11,lbl:1029},{sz:11,lbl:1030},{sz:11,lbl:1031}],[{sz:7,lbl:111},{sz:5,lbl:26},{sz:4,lbl:12},{sz:3,lbl:3},{sz:3,lbl:7},{sz:2,lbl:2},{sz:2,lbl:0},{sz:3,lbl:2},{sz:6,lbl:54},{sz:9,lbl:443},{sz:9,lbl:441},{sz:10,lbl:885},{sz:10,lbl:884},{sz:10,lbl:880},{sz:11,lbl:1763},{sz:11,lbl:1762}],[{sz:4,lbl:9},{sz:3,lbl:5},{sz:2,lbl:0},{sz:2,lbl:1},{sz:2,lbl:3},{sz:5,lbl:17},{sz:6,lbl:33},{sz:7,lbl:65},{sz:8,lbl:129},{sz:10,lbl:512},{sz:11,lbl:1026},{sz:11,lbl:1027},{sz:11,lbl:1028},{sz:11,lbl:1029},{sz:11,lbl:1030},{sz:11,lbl:1031}]];function l(e,t,a,l){var _=function(){for(var e=[],t=0;t<16;)e.push({codingType:0,codingTable:0,resolution:null,uncompressSamples:[]}),t+=1;return{batch_counter:0,batch_relative_timestamp:0,series:e}}(),p=function(e){function t(e,t,a){var i=t,d=a-1;if(8*e.length<i+a)throw new Error("Batch : Verify that dest buf is large enough");for(var n=0,r=0;a>0;)e[i>>3]&1<<(7&i)&&(r|=1<<d-n),a--,n++,i++;return r}return{index:0,byteArray:e,getNextSample:function(e,t){var a=t||n[e],i=this.index;if(this.index+=a,e===d&&32!==a)throw new Error("Batch : Mauvais sampletype");var r=0,s=Math.trunc((a-1)/8)+1,l=a%8;for(0===l&&s>0&&(l=8);s>0;){for(var o=0;l>0;){var x=i>>3;this.byteArray[x]&1<<(7&i)&&(r|=1<<8*(s-1)+o),l--,o++,i+=1}s--,l=8}if((3==e||5==e||7==e||9==e)&&r&1<<a-1)for(var u=a;u<32;u++)r|=1<<u,a++;return r},getNextBifromHi:function(e){for(var a=2;a<12;a++)for(var i=t(this.byteArray,this.index,a),d=0;d<s[e].length;d++)if(s[e][d].sz==a&&i==s[e][d].lbl)return this.index+=a,d;throw new Error("Bi not found in HUFF table")}}}(function(e){if(null!=e){e=e.toString().split("").filter((function(e){return!isNaN(parseInt(e,16))})).join("");for(var t=[];e.length>=2;)t.push(parseInt(e.substring(0,2),16)),e=e.substring(2,e.length);return t}-1===myerror.indexOf("Batch : Invalid hex string")&&myerror.push("Batch : Invalid hex string")}(a)),c=function(e){for(var t=e.toString(2);t.length<8;)t="0"+t;return{isCommonTimestamp:parseInt(t[t.length-2],2),hasSample:!parseInt(t[t.length-3],2),batch_req:parseInt(t[t.length-4],2),nb_of_type_measure:parseInt(t.substring(0,4),2)}}(p.getNextSample(4));_.batch_counter=p.getNextSample(4,3),p.getNextSample(4,1);var g=function(e,t,a,i,d){for(var n=0,r=0,s=0;s<i.nb_of_type_measure;s++){var l={size:d,lbl:t.getNextSample(4,d)},m=x(a,l);0===s&&(r=m),n=u(t,n),e.series[m]=o(t,a[m].sampletype,l.lbl,n),i.hasSample&&(e.series[m].codingType=t.getNextSample(4,2),e.series[m].codingTable=t.getNextSample(4,2))}return{last_timestamp:n,index_of_the_first_sample:r}}(_,p,t,c,e),h=g.last_timestamp,f=g.index_of_the_first_sample;return c.hasSample&&(h=function(e,t,a,d,n,s,l){return s.isCommonTimestamp?function(e,t,a,d,n,s){for(var l=t.getNextSample(4,8),o={},u=function(e,t,a,d){for(var n=[],s=0,l=t.getNextSample(4,2),o=0;o<a;o++){var x=t.getNextBifromHi(l);if(x<=r)if(0===o)n.push(e.series[d].uncompressSamples[0].data_relative_timestamp);else if(x>0){var u=n[o-1];n.push(t.getNextSample(i,x)+u+Math.pow(2,x)-1)}else n.push(u);else n.push(t.getNextSample(i));s=n[o]}return{timestampCommon:n,lastTimestamp:s}}(e,t,l,a),m=u.timestampCommon,_=u.lastTimestamp,p=0;p<n.nb_of_type_measure;p++){var c=1;o.lbl=t.getNextSample(4,s);for(var g=x(d,o),h=0;h<l;h++)if(t.getNextSample(4,1)){var f=t.getNextBifromHi(e.series[g].codingTable),v={data_relative_timestamp:0,data:{}};if(f<=r){var I=e.series[g].uncompressSamples[e.series[g].uncompressSamples.length-1].data.value;if(f>0)v.data.value=b(t,I,e.series[g].codingType,d[g].resol,f);else{if(c){c=0;continue}v.data.value=I}}else v.data.value=t.getNextSample(d[g].sampletype);v.data_relative_timestamp=m[h],e.series[g].uncompressSamples.push(v)}}return _}(e,t,a,d,s,l):function(e,t,a,i,d,n){for(var s={},l=0;l<d.nb_of_type_measure;l++){s.lbl=t.getNextSample(4,n);var o=x(a,s),u=t.getNextSample(4,8);if(u)for(var _=t.getNextSample(4,2),p=0;p<u;p++){var c=e.series[o].uncompressSamples[e.series[o].uncompressSamples.length-1].data_relative_timestamp,g={data_relative_timestamp:0,data:{}},h=t.getNextBifromHi(_);if(g.data_relative_timestamp=m(t,c,h),g.data_relative_timestamp>i&&(i=g.data_relative_timestamp),(h=t.getNextBifromHi(e.series[o].codingTable))<=r){var f=e.series[o].uncompressSamples[e.series[o].uncompressSamples.length-1].data.value;g.data.value=h>0?b(t,f,e.series[o].codingType,a[o].resol,h):f}else g.data.value=t.getNextSample(a[o].sampletype);e.series[o].uncompressSamples.push(g)}}return i}(e,t,d,n,s,l)}(_,p,f,t,h,c,e)),_.batch_relative_timestamp=u(p,h),function(e,t,a){var i={batch_counter:e.batch_counter,batch_relative_timestamp:e.batch_relative_timestamp};return a&&(i.batch_absolute_timestamp=a),i.dataset=e.series.reduce((function(i,d,n){return i.concat(d.uncompressSamples.map((function(i){var d,r,s,l={data_relative_timestamp:i.data_relative_timestamp,data:{value:t[n].divide?i.data.value/t[n].divide:i.data.value,label:t[n].taglbl}};return t[n].lblname&&(l.data.label_name=t[n].lblname),a&&(l.data_absolute_timestamp=(d=a,r=e.batch_relative_timestamp,s=i.data_relative_timestamp,new Date(new Date(d)-1e3*(r-s)).toISOString())),l})))}),[]),i}(_,t,l)}function o(e,t,a,i){return{uncompressSamples:[{data_relative_timestamp:i,data:{value:_(e,t),label:a}}],codingType:0,codingTable:0,resolution:null}}function x(e,t){for(var a=0;a<e.length;a++)if(e[a].taglbl===t.lbl)return a;throw new Error("Batch : Cannot find index in argList")}function u(e,t){if(t){var a=e.getNextBifromHi(1);return m(e,t,a)}return e.getNextSample(i)}function m(e,t,a){return a>r?e.getNextSample(i):a>0?function(e,t,a){return e.getNextSample(i,a)+t+Math.pow(2,a)-1}(e,t,a):t}function _(e,t){var a=e.getNextSample(t);return t===d?function(e){var t=2147483648&e?-1:1,a=(e>>23&255)-127,i=8388607&e;if(128==a)return t*(i?Number.NaN:Number.POSITIVE_INFINITY);if(-127==a){if(0===i)return 0*t;a=-126,i/=1<<22}else i=(i|1<<23)/(1<<23);return t*i*Math.pow(2,a)}(a):a}function b(e,t,i,d,n){var r=e.getNextSample(a,n);return 0===i?function(e,t,a,i){return e>=Math.pow(2,i-1)?e*t+a:(e+1-Math.pow(2,i))*t+a}(r,d,t,n):1===i?(r+Math.pow(2,n)-1)*d+t:t-(r+(Math.pow(2,n)-1))*d}Math.trunc=Math.trunc||function(e){return isNaN(e)?NaN:e>0?Math.floor(e):Math.ceil(e)};try{e.exports=l}catch(e){t.err_msg=e}e.exports={brUncompress:l,normalisation:function(e){let t=e.date,a=l(e.batch1,e.batch2,e.payload,t),i=[];for(let e=0;e<a.dataset.length;e++){let t=a.dataset[e],d={variable:t.data.label_name,value:t.data.value,date:t.data_absolute_timestamp};i.push(d)}return i}}},942:e=>{function t(e,t){return 2===t&&(32768&e)>0&&(e-=65536),3===t&&(8388608&e)>0&&(e-=16777216),4===t&&(2147483648&e)>0&&(e-=4294967296),e}function a(e){var t=2147483648&e?-1:1,a=(e>>23&255)-127,i=8388607&e;if(128==a)return t*(i?Number.NaN:Number.POSITIVE_INFINITY);if(-127==a){if(0==i)return 0*t;a=-126,i/=1<<23}else i=(i|1<<23)/(1<<23);return t*i*Math.pow(2,a)}function d(e,t,a,i){void 0===i&&(i=!1);var d,n,r="U"!=a.substr(0,1),s=parseInt(a.substr(1,2),10)/8,l=s;for(i?(d=-1,n=t+s-1):(d=1,n=t),tmpInt64=0,j=n;l>0;j+=d,l--)tmpInt64=(tmpInt64<<8)+e[j];return r&&s<8&&128&e[n]&&(tmpInt64-=1<<8*s),tmpInt64}function n(e,t){var a=e.toString(16).toUpperCase();for(t=null==t?t=2:t;a.length<t;)a="0"+a;return"0x"+a}function r(e,r){var s={lora:{}};s.lora.port=r;var l=e.length,x="";s.lora.payload="";for(var u=0;u<l;u++){1==(x=e[u].toString(16).toUpperCase()).length&&(x="0"+x),s.lora.payload+=x;var m=new Date;s.lora.date=m.toISOString()}if(125===r)if(batch=!(1&e[0]),!1===batch){if(s.zclheader={},s.zclheader.report="standard",attributID=-1,cmdID=-1,clusterdID=-1,s.zclheader.endpoint=(224&e[0])>>5|(6&e[0])<<2,cmdID=e[1],s.zclheader.cmdID=n(cmdID,2),clusterdID=256*e[2]+e[3],s.zclheader.clusterdID=n(clusterdID,4),10===cmdID|138===cmdID|1===cmdID){if(s.data={},attributID=256*e[4]+e[5],s.zclheader.attributID=n(attributID,4),138===cmdID&&(s.zclheader.alarm=1),10===cmdID|138===cmdID&&(index=7),1===cmdID&&(index=8,s.zclheader.status=e[6]),1026===clusterdID&0===attributID&&(s.data.temperature=t(256*e[index]+e[index+1],2)/100),1029===clusterdID&0===attributID&&(s.data.humidity=(256*e[index]+e[index+1])/100),15===clusterdID&1026===attributID&&(s.data.counter=256*e[index]*256*256+256*e[index+1]*256+256*e[index+2]+e[index+3]),15===clusterdID&85===attributID&&(s.data.pin_state=!!e[index]),19===clusterdID&85===attributID&&(s.data.value=e[index]),6===clusterdID&0===attributID&&(state=e[index],1===state?s.data.state="ON":s.data.state="OFF"),32776===clusterdID&0===attributID&&(s.data.differential_pressure=256*e[index]+e[index+1]),32773===clusterdID&0===attributID&&(s.data.pin_state_1=1==(1&e[index+1]),s.data.pin_state_2=2==(2&e[index+1]),s.data.pin_state_3=4==(4&e[index+1]),s.data.pin_state_4=8==(8&e[index+1]),s.data.pin_state_5=16==(16&e[index+1]),s.data.pin_state_6=32==(32&e[index+1]),s.data.pin_state_7=64==(64&e[index+1]),s.data.pin_state_8=128==(128&e[index+1]),s.data.pin_state_9=1==(1&e[index]),s.data.pin_state_10=2==(2&e[index])),12===clusterdID&85===attributID&&(s.data.analog=a(256*e[index]*256*256+256*e[index+1]*256+256*e[index+2]+e[index+3])),32775===clusterdID&1===attributID)for(s.data.payload="",s.data.modbus_payload="",s.data.size=e[index],s.data.modbus_float=0,u=0;u<s.data.size;u++)1==(x=e[index+u+1].toString(16).toUpperCase()).length&&(x="0"+x),s.data.payload+=x,0==u?s.data.modbus_address=e[index+u+1]:1==u?s.data.modbus_commandID=e[index+u+1]:2==u?s.data.modbus_size=e[index+u+1]:(s.data.modbus_payload+=x,1==s.data.modbus_float&&(3==u&&(s.data.fregister_00=a(256*e[index+u+1]*256*256+256*e[index+u+1+1]*256+256*e[index+u+1+2]+e[index+u+1+3])),7==u&&(s.data.fregister_01=a(256*e[index+u+1]*256*256+256*e[index+u+1+1]*256+256*e[index+u+1+2]+e[index+u+1+3])),11==u&&(s.data.fregister_02=a(256*e[index+u+1]*256*256+256*e[index+u+1+1]*256+256*e[index+u+1+2]+e[index+u+1+3])),15==u&&(s.data.fregister_03=a(256*e[index+u+1]*256*256+256*e[index+u+1+1]*256+256*e[index+u+1+2]+e[index+u+1+3])),19==u&&(s.data.fregister_04=a(256*e[index+u+1]*256*256+256*e[index+u+1+1]*256+256*e[index+u+1+2]+e[index+u+1+3])),23==u&&(s.data.fregister_05=a(256*e[index+u+1]*256*256+256*e[index+u+1+1]*256+256*e[index+u+1+2]+e[index+u+1+3])),27==u&&(s.data.fregister_06=a(256*e[index+u+1]*256*256+256*e[index+u+1+1]*256+256*e[index+u+1+2]+e[index+u+1+3])),31==u&&(s.data.fregister_07=a(256*e[index+u+1]*256*256+256*e[index+u+1+1]*256+256*e[index+u+1+2]+e[index+u+1+3])),35==u&&(s.data.fregister_08=a(256*e[index+u+1]*256*256+256*e[index+u+1+1]*256+256*e[index+u+1+2]+e[index+u+1+3])),35==u&&(s.data.fregister_09=a(256*e[index+u+1]*256*256+256*e[index+u+1+1]*256+256*e[index+u+1+2]+e[index+u+1+3]))),2==s.data.modbus_float&&(3==u&&(s.data.fregister_00=a(256*e[index+u+1]+e[index+u+1+1]+256*e[index+u+1+2]*256*256+256*e[index+u+1+3]*256)),7==u&&(s.data.fregister_01=a(256*e[index+u+1]+e[index+u+1+1]+256*e[index+u+1+2]*256*256+256*e[index+u+1+3]*256)),11==u&&(s.data.fregister_02=a(256*e[index+u+1]+e[index+u+1+1]+256*e[index+u+1+2]*256*256+256*e[index+u+1+3]*256)),15==u&&(s.data.fregister_03=a(256*e[index+u+1]+e[index+u+1+1]+256*e[index+u+1+2]*256*256+256*e[index+u+1+3]*256)),19==u&&(s.data.fregister_04=a(256*e[index+u+1]+e[index+u+1+1]+256*e[index+u+1+2]*256*256+256*e[index+u+1+3]*256)),23==u&&(s.data.fregister_05=a(256*e[index+u+1]+e[index+u+1+1]+256*e[index+u+1+2]*256*256+256*e[index+u+1+3]*256)),27==u&&(s.data.fregister_06=a(256*e[index+u+1]+e[index+u+1+1]+256*e[index+u+1+2]*256*256+256*e[index+u+1+3]*256)),31==u&&(s.data.fregister_07=a(256*e[index+u+1]+e[index+u+1+1]+256*e[index+u+1+2]*256*256+256*e[index+u+1+3]*256)),35==u&&(s.data.fregister_08=a(256*e[index+u+1]+e[index+u+1+1]+256*e[index+u+1+2]*256*256+256*e[index+u+1+3]*256)),35==u&&(s.data.fregister_09=a(256*e[index+u+1]+e[index+u+1+1]+256*e[index+u+1+2]*256*256+256*e[index+u+1+3]*256))));if(32777===clusterdID&0===attributID){if(s.data.payloads="",s.data.size=e[index],s.data.multimodbus_frame_series_sent=e[index+1],s.data.multimodbus_frame_number_in_serie=(224&e[index+2])>>5,s.data.multimodbus_last_frame_of_serie=(28&e[index+2])>>2,s.data.multimodbus_EP9=1==(1&e[index+2]),s.data.multimodbus_EP8=2==(2&e[index+2]),s.data.multimodbus_EP7=128==(128&e[index+3]),s.data.multimodbus_EP6=64==(64&e[index+3]),s.data.multimodbus_EP5=32==(32&e[index+3]),s.data.multimodbus_EP4=16==(16&e[index+3]),s.data.multimodbus_EP3=8==(8&e[index+3]),s.data.multimodbus_EP2=4==(4&e[index+3]),s.data.multimodbus_EP1=2==(2&e[index+3]),s.data.multimodbus_EP0=1==(1&e[index+3]),index2=index+4,without_header=0,!0===s.data.multimodbus_EP0){if(0===without_header&&(s.data.multimodbus_EP0_slaveID=e[index2],index2+=1,s.data.multimodbus_EP0_fnctID=e[index2],index2+=1,s.data.multimodbus_EP0_datasize=e[index2],index2+=1),s.data.multimodbus_EP0_payload="",void 0===e[index2])return s;for(u=0;u<s.data.multimodbus_EP0_datasize;u++)1==(x=e[index2+u].toString(16).toUpperCase()).length&&(x="0"+x),s.data.multimodbus_EP0_payload+=x;index2+=s.data.multimodbus_EP0_datasize}if(!0===s.data.multimodbus_EP1){if(0===without_header&&(s.data.multimodbus_EP1_slaveID=e[index2],index2+=1,s.data.multimodbus_EP1_fnctID=e[index2],index2+=1,s.data.multimodbus_EP1_datasize=e[index2],index2+=1),s.data.multimodbus_EP1_payload="",void 0===e[index2])return s;for(u=0;u<s.data.multimodbus_EP1_datasize;u++)1==(x=e[index2+u].toString(16).toUpperCase()).length&&(x="0"+x),s.data.multimodbus_EP1_payload+=x;index2+=s.data.multimodbus_EP1_datasize}if(!0===s.data.multimodbus_EP2){if(0===without_header&&(s.data.multimodbus_EP2_slaveID=e[index2],index2+=1,s.data.multimodbus_EP2_fnctID=e[index2],index2+=1,s.data.multimodbus_EP2_datasize=e[index2],index2+=1),s.data.multimodbus_EP2_payload="",void 0===e[index2])return s;for(u=0;u<s.data.multimodbus_EP2_datasize;u++)1==(x=e[index2+u].toString(16).toUpperCase()).length&&(x="0"+x),s.data.multimodbus_EP2_payload+=x;index2+=s.data.multimodbus_EP2_datasize}if(!0===s.data.multimodbus_EP3){if(0===without_header&&(s.data.multimodbus_EP3_slaveID=e[index2],index2+=1,s.data.multimodbus_EP3_fnctID=e[index2],index2+=1,s.data.multimodbus_EP3_datasize=e[index2],index2+=1),s.data.multimodbus_EP3_payload="",void 0===e[index2])return s;for(u=0;u<s.data.multimodbus_EP3_datasize;u++)1==(x=e[index2+u].toString(16).toUpperCase()).length&&(x="0"+x),s.data.multimodbus_EP3_payload+=x;index2+=s.data.multimodbus_EP3_datasize}if(!0===s.data.multimodbus_EP4){if(0===without_header&&(s.data.multimodbus_EP4_slaveID=e[index2],index2+=1,s.data.multimodbus_EP4_fnctID=e[index2],index2+=1,s.data.multimodbus_EP4_datasize=e[index2],index2+=1),s.data.multimodbus_EP4_payload="",void 0===e[index2])return s;for(u=0;u<s.data.multimodbus_EP4_datasize;u++)1==(x=e[index2+u].toString(16).toUpperCase()).length&&(x="0"+x),s.data.multimodbus_EP4_payload+=x;index2+=s.data.multimodbus_EP4_datasize}if(!0===s.data.multimodbus_EP5){if(0===without_header&&(s.data.multimodbus_EP5_slaveID=e[index2],index2+=1,s.data.multimodbus_EP5_fnctID=e[index2],index2+=1,s.data.multimodbus_EP5_datasize=e[index2],index2+=1),s.data.multimodbus_EP5_payload="",void 0===e[index2])return s;for(u=0;u<s.data.multimodbus_EP5_datasize;u++)1==(x=e[index2+u].toString(16).toUpperCase()).length&&(x="0"+x),s.data.multimodbus_EP5_payload+=x;index2+=s.data.multimodbus_EP5_datasize}if(!0===s.data.multimodbus_EP6){if(0===without_header&&(s.data.multimodbus_EP6_slaveID=e[index2],index2+=1,s.data.multimodbus_EP6_fnctID=e[index2],index2+=1,s.data.multimodbus_EP6_datasize=e[index2],index2+=1),s.data.multimodbus_EP6_payload="",void 0===e[index2])return s;for(u=0;u<s.data.multimodbus_EP6_datasize;u++)1==(x=e[index2+u].toString(16).toUpperCase()).length&&(x="0"+x),s.data.multimodbus_EP6_payload+=x;index2+=s.data.multimodbus_EP6_datasize}if(!0===s.data.multimodbus_EP7){if(0===without_header&&(s.data.multimodbus_EP7_slaveID=e[index2],index2+=1,s.data.multimodbus_EP7_fnctID=e[index2],index2+=1,s.data.multimodbus_EP7_datasize=e[index2],index2+=1),s.data.multimodbus_EP7_payload="",void 0===e[index2])return s;for(u=0;u<s.data.multimodbus_EP7_datasize;u++)1==(x=e[index2+u].toString(16).toUpperCase()).length&&(x="0"+x),s.data.multimodbus_EP7_payload+=x;index2+=s.data.multimodbus_EP7_datasize}if(!0===s.data.multimodbus_EP8){if(0===without_header&&(s.data.multimodbus_EP8_slaveID=e[index2],index2+=1,s.data.multimodbus_EP8_fnctID=e[index2],index2+=1,s.data.multimodbus_EP8_datasize=e[index2],index2+=1),s.data.multimodbus_EP8_payload="",void 0===e[index2])return s;for(u=0;u<s.data.multimodbus_EP8_datasize;u++)1==(x=e[index2+u].toString(16).toUpperCase()).length&&(x="0"+x),s.data.multimodbus_EP8_payload+=x;index2+=s.data.multimodbus_EP8_datasize}if(!0===s.data.multimodbus_EP9){if(0===without_header&&(s.data.multimodbus_EP6_slaveID=e[index2],index2+=1,s.data.multimodbus_EP6_fnctID=e[index2],index2+=1,s.data.multimodbus_EP6_datasize=e[index2],index2+=1),s.data.multimodbus_EP6_payload="",void 0===e[index2])return s;for(u=0;u<s.data.multimodbus_EP6_datasize;u++)1==(x=e[index2+u].toString(16).toUpperCase()).length&&(x="0"+x),s.data.multimodbus_EP6_payload+=x;index2+=s.data.multimodbus_EP6_datasize}}82===clusterdID&0===attributID&&(s.data.active_energy_Wh=t(256*e[index+1]*256+256*e[index+2]+e[index+3],3),s.data.reactive_energy_Varh=t(256*e[index+4]*256+256*e[index+5]+e[index+6],3),s.data.nb_samples=256*e[index+7]+e[index+8],s.data.active_power_W=t(256*e[index+9]+e[index+10],2),s.data.reactive_power_VAR=t(256*e[index+11]+e[index+12],2)),32772===clusterdID&0===attributID&&(1===e[index]&&(s.data.message_type="confirmed"),0===e[index]&&(s.data.message_type="unconfirmed")),32772===clusterdID&1===attributID&&(s.data.nb_retry=e[index]),32772===clusterdID&2===attributID&&(s.data.period_in_minutes=256*e[index+1]+e[index+2],s.data.nb_err_frames=256*e[index+3]+e[index+4]),80===clusterdID&6===attributID&&(index2=index+3,1==(1&e[index+2])&&(s.data.main_or_external_voltage=(256*e[index2]+e[index2+1])/1e3,index2+=2),2==(2&e[index+2])&&(s.data.rechargeable_battery_voltage=(256*e[index2]+e[index2+1])/1e3,index2+=2),4==(4&e[index+2])&&(s.data.disposable_battery_voltage=(256*e[index2]+e[index2+1])/1e3,index2+=2),8==(8&e[index+2])&&(s.data.solar_harvesting_voltage=(256*e[index2]+e[index2+1])/1e3,index2+=2),16==(16&e[index+2])&&(s.data.tic_harvesting_voltage=(256*e[index2]+e[index2+1])/1e3,index2+=2)),32778===clusterdID&0===attributID&&(index2=index,s.data.sum_positive_active_energy_Wh=t(256*e[index2+1]*256*256+256*e[index2+2]*256+256*e[index2+3]+e[index2+4],4),index2+=4,s.data.sum_negative_active_energy_Wh=t(256*e[index2+1]*256*256+256*e[index2+2]*256+256*e[index2+3]+e[index2+4],4),index2+=4,s.data.sum_positive_reactive_energy_Wh=t(256*e[index2+1]*256*256+256*e[index2+2]*256+256*e[index2+3]+e[index2+4],4),index2+=4,s.data.sum_negative_reactive_energy_Wh=t(256*e[index2+1]*256*256+256*e[index2+2]*256+256*e[index2+3]+e[index2+4],4),index2+=4,s.data.positive_active_power_W=t(256*e[index2+1]*256*256+256*e[index2+2]*256+256*e[index2+3]+e[index2+4],4),index2+=4,s.data.negative_active_power_W=t(256*e[index2+1]*256*256+256*e[index2+2]*256+256*e[index2+3]+e[index2+4],4),index2+=4,s.data.positive_reactive_power_W=t(256*e[index2+1]*256*256+256*e[index2+2]*256+256*e[index2+3]+e[index2+4],4),index2+=4,s.data.negative_reactive_power_W=t(256*e[index2+1]*256*256+256*e[index2+2]*256+256*e[index2+3]+e[index2+4],4)),32784===clusterdID&0===attributID?(s.data.ActiveEnergyWhPhaseA=Int32UnsignedToSigned(256*e[index+1]*256*256+256*e[index+2]*256+256*e[index+3]+e[index+4]),s.data.ReactiveEnergyWhPhaseA=Int32UnsignedToSigned(256*e[index+5]*256*256+256*e[index+6]*256+256*e[index+7]+e[index+8]),s.data.ActiveEnergyWhPhaseB=Int32UnsignedToSigned(256*e[index+9]*256*256+256*e[index+10]*256+256*e[index+11]+e[index+12]),s.data.ReactiveEnergyWhPhaseB=Int32UnsignedToSigned(256*e[index+13]*256*256+256*e[index+14]*256+256*e[index+15]+e[index+16]),s.data.ActiveEnergyWhPhaseC=Int32UnsignedToSigned(256*e[index+17]*256*256+256*e[index+18]*256+256*e[index+19]+e[index+20]),s.data.ReactiveEnergyWhPhaseC=Int32UnsignedToSigned(256*e[index+21]*256*256+256*e[index+22]*256+256*e[index+23]+e[index+24]),s.data.ActiveEnergyWhPhaseABC=Int32UnsignedToSigned(256*e[index+25]*256*256+256*e[index+26]*256+256*e[index+27]+e[index+28]),s.data.ReactiveEnergyWhPhaseABC=Int32UnsignedToSigned(256*e[index+29]*256*256+256*e[index+30]*256+256*e[index+31]+e[index+32])):32784===clusterdID&1===attributID&&(s.data.ActivePowerWPhaseA=Int32UnsignedToSigned(256*e[index+1]*256*256+256*e[index+2]*256+256*e[index+3]+e[index+4]),s.data.ReactivePowerWPhaseA=Int32UnsignedToSigned(256*e[index+5]*256*256+256*e[index+6]*256+256*e[index+7]+e[index+8]),s.data.ActivePowerWPhaseB=Int32UnsignedToSigned(256*e[index+9]*256*256+256*e[index+10]*256+256*e[index+11]+e[index+12]),s.data.ReactivePowerWPhaseB=Int32UnsignedToSigned(256*e[index+13]*256*256+256*e[index+14]*256+256*e[index+15]+e[index+16]),s.data.ActivePowerWPhaseC=Int32UnsignedToSigned(256*e[index+17]*256*256+256*e[index+18]*256+256*e[index+19]+e[index+20]),s.data.ReactivePowerWPhaseC=Int32UnsignedToSigned(256*e[index+21]*256*256+256*e[index+22]*256+256*e[index+23]+e[index+24]),s.data.ActivePowerWPhaseABC=Int32UnsignedToSigned(256*e[index+25]*256*256+256*e[index+26]*256+256*e[index+27]+e[index+28]),s.data.ReactivePowerWPhaseABC=Int32UnsignedToSigned(256*e[index+29]*256*256+256*e[index+30]*256+256*e[index+31]+e[index+32])),32779===clusterdID&0===attributID&&(index2=index,s.data.Vrms=t(256*e[index2+1]+e[index2+2],2)/10,index2+=2,s.data.Irms=t(256*e[index2+1]+e[index2+2],2)/10,index2+=2,s.data.phase_angle=t(256*e[index2+1]+e[index2+2],2)),32781===clusterdID&0===attributID&&(s.data.VrmsA=t(256*e[index+1]+e[index+2],2)/10,s.data.IrmsA=t(256*e[index+3]+e[index+4],2)/10,s.data.PhaseA=t(256*e[index+5]+e[index+6],2),s.data.VrmsB=t(256*e[index+7]+e[index+8],2)/10,s.data.IrmsB=t(256*e[index+9]+e[index+10],2)/10,s.data.PhaseB=t(256*e[index+11]+e[index+12],2),s.data.VrmsC=t(256*e[index+13]+e[index+14],2)/10,s.data.IrmsC=t(256*e[index+15]+e[index+16],2)/10,s.data.PhaseC=t(256*e[index+17]+e[index+18],2)),32780===clusterdID&0===attributID&&(s.data.Concentration=256*e[index]+e[index+1]),1024===clusterdID&0===attributID&&(s.data.Illuminance=256*e[index]+e[index+1]),1027===clusterdID&0===attributID&&(s.data.Pressure=t(256*e[index]+e[index+1],2)),1030===clusterdID&0===attributID&&(s.data.Occupancy=!!e[index]),32850===clusterdID&0===attributID&&(index2=index,s.data.frequency=(t(256*e[index2+1]+e[index2+2],2)+22232)/1e3,index2+=2,s.data.frequency_min=(t(256*e[index2+1]+e[index2+2],2)+22232)/1e3,index2+=2,s.data.frequency_max=(t(256*e[index2+1]+e[index2+2],2)+22232)/1e3,index2+=2,s.data.Vrms=t(256*e[index2+1]+e[index2+2],2)/10,index2+=2,s.data.Vrms_min=t(256*e[index2+1]+e[index2+2],2)/10,index2+=2,s.data.Vrms_max=t(256*e[index2+1]+e[index2+2],2)/10,index2+=2,s.data.Vpeak=t(256*e[index2+1]+e[index2+2],2)/10,index2+=2,s.data.Vpeak_min=t(256*e[index2+1]+e[index2+2],2)/10,index2+=2,s.data.Vpeak_max=t(256*e[index2+1]+e[index2+2],2)/10,index2+=2,s.data.over_voltage=t(256*e[index2+1]+e[index2+2],2),index2+=2,s.data.sag_voltage=t(256*e[index2+1]+e[index2+2],2)),32783===clusterdID&&(i=index+1,0===attributID?(o=s.data.Last={},o.NbTriggedAcq=d(e,i,"U32"),i+=4,o.Mean_X_G=d(e,i,"U16")/100,i+=2,o.Max_X_G=d(e,i,"U16")/100,i+=2,o.Dt_X_ms=d(e,i,"U16"),i+=2,o.Mean_Y_G=d(e,i,"U16")/100,i+=2,o.Max_Y_G=d(e,i,"U16")/100,i+=2,o.Dt_Y_ms=d(e,i,"U16"),i+=2,o.Mean_Z_G=d(e,i,"U16")/100,i+=2,o.Max_Z_G=d(e,i,"U16")/100,i+=2,o.Dt_Z_ms=d(e,i,"U16")):1===attributID||2===attributID||3===attributID?(ext=1===attributID?"Stats_X":2===attributID?"Stats_Y":"Stats_Z",o=s.data[ext]={},o.NbAcq=d(e,i,"U16"),i+=2,o.MinMean_G=d(e,i,"U16")/100,i+=2,o.MinMax_G=d(e,i,"U16")/100,i+=2,o.MinDt=d(e,i,"U16"),i+=2,o.MeanMean_G=d(e,i,"U16")/100,i+=2,o.MeanMax_G=d(e,i,"U16")/100,i+=2,o.MeanDt=d(e,i,"U16"),i+=2,o.MaxMean_G=d(e,i,"U16")/100,i+=2,o.MaxMax_G=d(e,i,"U16")/100,i+=2,o.MaxDt=d(e,i,"U16"),i+=2):32768===attributID&&(o=s.data.Params={},o.WaitFreq_Hz=d(e,i,"U16")/10,i+=2,o.AcqFreq_Hz=d(e,i,"U16")/10,i+=2,delay=d(e,i,"U16"),i+=2,32768&delay&&(delay=60*(-32769&delay)),o.NewWaitDelay_s=32768&delay?delay=60*(-32769&delay):delay,o.MaxAcqDuration_ms=d(e,i,"U16"),i+=2,o.Threshold_X_G=d(e,i,"U16")/100,i+=2,o.Threshold_Y_G=d(e,i,"U16")/100,i+=2,o.Threshold_Z_G=d(e,i,"U16")/100,i+=2,o.OverThrsh_Dt_ms=d(e,i,"U16"),i+=2,o.UnderThrsh_Dt_ms=d(e,i,"U16"),i+=2,o.Range_G=d(e,i,"U16")/100,i+=2,o.FilterSmoothCoef=d(e,i,"U8"),i+=1,o.FilterGainCoef=d(e,i,"U8"),i+=1,o=s.data.Params.WorkingModes={},o.SignalEachAcq=128&e[i]?"true":"false",o.RstAftStdRpt_X=1&e[i]?"true":"false",o.RstAftStdRpt_Y=2&e[i]?"true":"false",o.RstAftStdRpt_7=4&e[i]?"true":"false"))}7===cmdID&&(attributID=256*e[6]+e[7],s.zclheader.attributID=n(attributID,4),s.zclheader.status=e[4],s.zclheader.batch=e[5]),9===cmdID&&(attributID=256*e[6]+e[7],s.zclheader.attributID=n(attributID,4),s.zclheader.status=e[4],s.zclheader.batch=e[5],s.zclheader.attribut_type=e[8],s.zclheader.min={},128==(128&e[9])?(s.zclheader.min.value=256*(e[9]-128)+e[10],s.zclheader.min.unity="minutes"):(s.zclheader.min.value=256*e[9]+e[10],s.zclheader.min.unity="seconds"),s.zclheader.max={},128==(128&e[11])?(s.zclheader.max.value=256*(e[11]-128)+e[12],s.zclheader.max.unity="minutes"):(s.zclheader.max.value=256*e[11]+e[12],s.zclheader.max.unity="seconds"),s.lora.payload="")}else s.batch={},s.batch.report="batch";return s}e.exports={Decoder:r,normalisation:function(e,t){let a=r(e.bytes,e.fPort);if(void 0!==a.zclheader){let e=a.zclheader.endpoint,i=Object.keys(a.data)[0];return{data:{variable:t[i][e],value:a.data[i],date:a.lora.date},type:"standard"}}return{type:a.batch.report,payload:a.lora.payload}}}},397:(e,t,a)=>{const i=a(942),d=a(41);e.exports={watteco_decodeUplink:function(e,t,a){e.bytes,e.fPort;let n=e.recvTime;try{let r=i.normalisation(e,a),s=r.payload;if("batch"!==r.type)return{data:r.data,warnings:[]};{let e={batch1:t[0],batch2:t[1],payload:s,date:n};try{return{data:d.normalisation(e),warnings:[]}}catch(e){return{error:e.message,warnings:[]}}}}catch(e){return{error:e.message,warnings:[]}}},strToDecimalArray:function(e){let t=[];for(let a=0;a<e.length;a+=2)t.push(parseInt(e.substring(a,a+2),16));return t}}}},t={};function a(i){var d=t[i];if(void 0!==d)return d.exports;var n=t[i]={exports:{}};return e[i](n,n.exports,a),n.exports}a(41),a(942),a(397),a(544)})();